+++
title = "Differences in S3 and CloudFront Behavior for a Static Site"
date = "2022-10-19"
aliases = ["/posts/s3/"]
draft = true
+++

## This website is ...

I recently finished setting this site up using Hugo for static site generation. The project is hosted on AWS, including use of S3 static sites, CloudFront for CDN, ACM for certificates, and a Lambda@Edge function for manipulating URL paths. In the process of working on this, I found that it was extremely simple to upload my Hugo-generated site to an S3 bucket, enable static site hosting, and navigate to the messy S3-generated URL. However, it was much harder to get everything involved in hosting a static site working with a domain name and CloudFront distribution. I want to briefly give my perspective on this process to potentially help future users of this stack, and to shed light on a problem where I could not find much.

## Where the problems started coming ...

TODO

## Solutions appear ... maybe

TODO

## So I guess I need to use a Lambda after all ...

TODO

## Links
https://gohugo.io/content-management/urls/
https://aws.amazon.com/premiumsupport/knowledge-center/cloudfront-serve-static-website/
https://aws.amazon.com/premiumsupport/knowledge-center/cloudfront-troubleshooting-images/
https://itnext.io/hugo-website-with-ssl-on-s3-is-straightforward-right-errrrm-369c0f19ab07
https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/private-content-restricting-access-to-s3.html#private-content-oac-permission-to-access-s3
https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/lambda-edge-add-triggers-lam-console.html
https://aws.amazon.com/blogs/compute/implementing-default-directory-indexes-in-amazon-s3-backed-amazon-cloudfront-origins-using-lambdaedge/
https://stackoverflow.com/questions/49082709/redirect-to-index-html-for-s3-subfolder/50458087#50458087
https://docs.aws.amazon.com/AmazonS3/latest/userguide/how-to-page-redirect.html
https://stevepapa.com/how-to-specify-a-default-root-object-for-static-website-subdirectories-on-aws-cloudfront/
https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/DefaultRootObject.html

